var gameJson = {"activePlayer":3,"diced":"6","message":"next turn","rows":[{"rowNr":0,"fields":[{"isFreeSpace":true,"x":0,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":1,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":2,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":3,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":4,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":5,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":6,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":7,"y":0,"sort":"f","avariable":false},{"isFreeSpace":false,"x":8,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":9,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":10,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":11,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":12,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":13,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":14,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":15,"y":0,"sort":"f","avariable":false},{"isFreeSpace":true,"x":16,"y":0,"sort":"f","avariable":false}]},{"rowNr":1,"fields":[{"isFreeSpace":false,"x":0,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":1,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":2,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":3,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":4,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":5,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":6,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":7,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":8,"y":1,"sort":"b","avariable":false},{"isFreeSpace":false,"x":9,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":10,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":11,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":12,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":13,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":14,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":15,"y":1,"sort":"f","avariable":false},{"isFreeSpace":false,"x":16,"y":1,"sort":"f","avariable":false}]},{"rowNr":2,"fields":[{"isFreeSpace":false,"x":0,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":1,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":2,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":3,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":4,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":5,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":6,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":7,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":8,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":9,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":10,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":11,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":12,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":13,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":14,"y":2,"sort":"f","avariable":false},{"isFreeSpace":true,"x":15,"y":2,"sort":"f","avariable":false},{"isFreeSpace":false,"x":16,"y":2,"sort":"f","avariable":false}]},{"rowNr":3,"fields":[{"isFreeSpace":false,"x":0,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":1,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":2,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":3,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":4,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":5,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":6,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":7,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":8,"y":3,"sort":"b","avariable":false},{"isFreeSpace":false,"x":9,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":10,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":11,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":12,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":13,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":14,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":15,"y":3,"sort":"f","avariable":false},{"isFreeSpace":false,"x":16,"y":3,"sort":"f","avariable":false}]},{"rowNr":4,"fields":[{"isFreeSpace":true,"x":0,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":1,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":2,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":3,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":4,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":5,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":6,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":7,"y":4,"sort":"f","avariable":false},{"isFreeSpace":false,"x":8,"y":4,"sort":"b","avariable":false},{"isFreeSpace":true,"x":9,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":10,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":11,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":12,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":13,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":14,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":15,"y":4,"sort":"f","avariable":false},{"isFreeSpace":true,"x":16,"y":4,"sort":"f","avariable":false}]},{"rowNr":5,"fields":[{"isFreeSpace":true,"x":0,"y":5,"sort":"f","avariable":false},{"isFreeSpace":true,"x":1,"y":5,"sort":"f","avariable":false},{"isFreeSpace":true,"x":2,"y":5,"sort":"f","avariable":false},{"isFreeSpace":true,"x":3,"y":5,"sort":"f","avariable":false},{"isFreeSpace":true,"x":4,"y":5,"sort":"f","avariable":false},{"isFreeSpace":true,"x":5,"y":5,"sort":"f","avariable":false},{"isFreeSpace":false,"x":6,"y":5,"sort":"f","avariable":false},{"isFreeSpace":false,"x":7,"y":5,"sort":"f","avariable":false},{"isFreeSpace":false,"x":8,"y":5,"sort":"b","avariable":false},{"isFreeSpace":false,"x":9,"y":5,"sort":"f","avariable":false},{"isFreeSpace":false,"x":10,"y":5,"sort":"f","avariable":false},{"isFreeSpace":true,"x":11,"y":5,"sort":"f","avariable":false},{"isFreeSpace":true,"x":12,"y":5,"sort":"f","avariable":false},{"isFreeSpace":true,"x":13,"y":5,"sort":"f","avariable":false},{"isFreeSpace":true,"x":14,"y":5,"sort":"f","avariable":false},{"isFreeSpace":true,"x":15,"y":5,"sort":"f","avariable":false},{"isFreeSpace":true,"x":16,"y":5,"sort":"f","avariable":false}]},{"rowNr":6,"fields":[{"isFreeSpace":true,"x":0,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":1,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":2,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":3,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":4,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":5,"y":6,"sort":"f","avariable":false},{"isFreeSpace":false,"x":6,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":7,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":8,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":9,"y":6,"sort":"f","avariable":false},{"isFreeSpace":false,"x":10,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":11,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":12,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":13,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":14,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":15,"y":6,"sort":"f","avariable":false},{"isFreeSpace":true,"x":16,"y":6,"sort":"f","avariable":false}]},{"rowNr":7,"fields":[{"isFreeSpace":true,"x":0,"y":7,"sort":"f","avariable":false},{"isFreeSpace":true,"x":1,"y":7,"sort":"f","avariable":false},{"isFreeSpace":true,"x":2,"y":7,"sort":"f","avariable":false},{"isFreeSpace":true,"x":3,"y":7,"sort":"f","avariable":false},{"isFreeSpace":false,"x":4,"y":7,"sort":"f","avariable":false},{"isFreeSpace":false,"x":5,"y":7,"sort":"f","avariable":false},{"isFreeSpace":false,"x":6,"y":7,"sort":"b","avariable":false},{"isFreeSpace":false,"x":7,"y":7,"sort":"f","avariable":false},{"isFreeSpace":false,"x":8,"y":7,"sort":"f","avariable":false},{"isFreeSpace":false,"x":9,"y":7,"sort":"f","avariable":false},{"isFreeSpace":false,"x":10,"y":7,"sort":"b","avariable":false},{"isFreeSpace":false,"x":11,"y":7,"sort":"f","avariable":false},{"isFreeSpace":false,"x":12,"y":7,"sort":"f","avariable":false},{"isFreeSpace":true,"x":13,"y":7,"sort":"f","avariable":false},{"isFreeSpace":true,"x":14,"y":7,"sort":"f","avariable":false},{"isFreeSpace":true,"x":15,"y":7,"sort":"f","avariable":false},{"isFreeSpace":true,"x":16,"y":7,"sort":"f","avariable":false}]},{"rowNr":8,"fields":[{"isFreeSpace":true,"x":0,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":1,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":2,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":3,"y":8,"sort":"f","avariable":false},{"isFreeSpace":false,"x":4,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":5,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":6,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":7,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":8,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":9,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":10,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":11,"y":8,"sort":"f","avariable":false},{"isFreeSpace":false,"x":12,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":13,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":14,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":15,"y":8,"sort":"f","avariable":false},{"isFreeSpace":true,"x":16,"y":8,"sort":"f","avariable":false}]},{"rowNr":9,"fields":[{"isFreeSpace":true,"x":0,"y":9,"sort":"f","avariable":false},{"isFreeSpace":true,"x":1,"y":9,"sort":"f","avariable":false},{"isFreeSpace":false,"x":2,"y":9,"sort":"f","avariable":false},{"isFreeSpace":false,"x":3,"y":9,"sort":"f","avariable":false},{"isFreeSpace":false,"x":4,"y":9,"sort":"f","avariable":false},{"isFreeSpace":false,"x":5,"y":9,"sort":"f","avariable":false},{"isFreeSpace":false,"x":6,"y":9,"sort":"f","avariable":false},{"isFreeSpace":false,"x":7,"y":9,"sort":"f","avariable":false},{"isFreeSpace":false,"x":8,"y":9,"sort":"f","avariable":false},{"isFreeSpace":false,"x":9,"y":9,"sort":"f","avariable":false},{"isFreeSpace":false,"x":10,"y":9,"sort":"f","avariable":false},{"isFreeSpace":false,"x":11,"y":9,"sort":"f","avariable":false},{"isFreeSpace":false,"x":12,"y":9,"sort":"f","avariable":false},{"isFreeSpace":false,"x":13,"y":9,"sort":"f","avariable":false},{"isFreeSpace":false,"x":14,"y":9,"sort":"f","avariable":false},{"isFreeSpace":true,"x":15,"y":9,"sort":"f","avariable":false},{"isFreeSpace":true,"x":16,"y":9,"sort":"f","avariable":false}]},{"rowNr":10,"fields":[{"isFreeSpace":true,"x":0,"y":10,"sort":"f","avariable":false},{"isFreeSpace":true,"x":1,"y":10,"sort":"f","avariable":false},{"isFreeSpace":false,"x":2,"y":10,"sort":"f","avariable":false},{"isFreeSpace":true,"x":3,"y":10,"sort":"f","avariable":false},{"isFreeSpace":true,"x":4,"y":10,"sort":"f","avariable":false},{"isFreeSpace":true,"x":5,"y":10,"sort":"f","avariable":false},{"isFreeSpace":false,"x":6,"y":10,"sort":"f","avariable":false},{"isFreeSpace":true,"x":7,"y":10,"sort":"f","avariable":false},{"isFreeSpace":true,"x":8,"y":10,"sort":"f","avariable":false},{"isFreeSpace":true,"x":9,"y":10,"sort":"f","avariable":false},{"isFreeSpace":false,"x":10,"y":10,"sort":"f","avariable":false},{"isFreeSpace":true,"x":11,"y":10,"sort":"f","avariable":false},{"isFreeSpace":true,"x":12,"y":10,"sort":"f","avariable":false},{"isFreeSpace":true,"x":13,"y":10,"sort":"f","avariable":false},{"isFreeSpace":false,"x":14,"y":10,"sort":"f","avariable":false},{"isFreeSpace":true,"x":15,"y":10,"sort":"f","avariable":false},{"isFreeSpace":true,"x":16,"y":10,"sort":"f","avariable":false}]},{"rowNr":11,"fields":[{"isFreeSpace":false,"x":0,"y":11,"sort":"b","avariable":false},{"isFreeSpace":false,"x":1,"y":11,"sort":"f","avariable":false},{"isFreeSpace":false,"x":2,"y":11,"sort":"f","avariable":false},{"isFreeSpace":false,"x":3,"y":11,"sort":"f","avariable":false},{"isFreeSpace":false,"x":4,"y":11,"sort":"b","avariable":false},{"isFreeSpace":false,"x":5,"y":11,"sort":"f","avariable":false},{"isFreeSpace":false,"x":6,"y":11,"sort":"f","avariable":false},{"isFreeSpace":false,"x":7,"y":11,"sort":"f","avariable":false},{"isFreeSpace":false,"x":8,"y":11,"sort":"b","avariable":false},{"isFreeSpace":false,"x":9,"y":11,"sort":"f","avariable":false},{"isFreeSpace":false,"x":10,"y":11,"sort":"f","avariable":false},{"isFreeSpace":false,"x":11,"y":11,"sort":"f","avariable":false},{"isFreeSpace":false,"x":12,"y":11,"sort":"b","avariable":false},{"isFreeSpace":false,"x":13,"y":11,"sort":"f","avariable":false},{"isFreeSpace":false,"x":14,"y":11,"sort":"f","avariable":false},{"isFreeSpace":false,"x":15,"y":11,"sort":"f","avariable":false},{"isFreeSpace":false,"x":16,"y":11,"sort":"b","avariable":false}]},{"rowNr":12,"fields":[{"isFreeSpace":false,"x":0,"y":12,"sort":"f","avariable":false},{"isFreeSpace":true,"x":1,"y":12,"sort":"f","avariable":false},{"isFreeSpace":true,"x":2,"y":12,"sort":"f","avariable":false},{"isFreeSpace":true,"x":3,"y":12,"sort":"f","avariable":false},{"isFreeSpace":false,"x":4,"y":12,"sort":"f","avariable":false},{"isFreeSpace":true,"x":5,"y":12,"sort":"f","avariable":false},{"isFreeSpace":true,"x":6,"y":12,"sort":"f","avariable":false},{"isFreeSpace":true,"x":7,"y":12,"sort":"f","avariable":false},{"isFreeSpace":false,"x":8,"y":12,"sort":"f","avariable":false},{"isFreeSpace":true,"x":9,"y":12,"sort":"f","avariable":false},{"isFreeSpace":true,"x":10,"y":12,"sort":"f","avariable":false},{"isFreeSpace":true,"x":11,"y":12,"sort":"f","avariable":false},{"isFreeSpace":false,"x":12,"y":12,"sort":"f","avariable":false},{"isFreeSpace":true,"x":13,"y":12,"sort":"f","avariable":false},{"isFreeSpace":true,"x":14,"y":12,"sort":"f","avariable":false},{"isFreeSpace":true,"x":15,"y":12,"sort":"f","avariable":false},{"isFreeSpace":false,"x":16,"y":12,"sort":"f","avariable":false}]},{"rowNr":13,"fields":[{"isFreeSpace":false,"x":0,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":1,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":2,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":3,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":4,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":5,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":6,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":7,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":8,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":9,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":10,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":11,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":12,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":13,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":14,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":15,"y":13,"sort":"f","avariable":false},{"isFreeSpace":false,"x":16,"y":13,"sort":"f","avariable":false}]},{"rowNr":14,"fields":[{"isFreeSpace":true,"x":0,"y":14,"sort":"f","avariable":false},{"isFreeSpace":false,"x":1,"y":14,"sort":"1","avariable":false},{"isFreeSpace":false,"x":2,"y":14,"sort":"1","avariable":false},{"isFreeSpace":false,"x":3,"y":14,"sort":"1","avariable":false},{"isFreeSpace":true,"x":4,"y":14,"sort":"f","avariable":false},{"isFreeSpace":false,"x":5,"y":14,"sort":"2","avariable":false},{"isFreeSpace":false,"x":6,"y":14,"sort":"2","avariable":false},{"isFreeSpace":false,"x":7,"y":14,"sort":"2","avariable":false},{"isFreeSpace":true,"x":8,"y":14,"sort":"f","avariable":false},{"isFreeSpace":false,"x":9,"y":14,"sort":"3","avariable":false},{"isFreeSpace":false,"x":10,"y":14,"sort":"3","avariable":false},{"isFreeSpace":false,"x":11,"y":14,"sort":"3","avariable":false},{"isFreeSpace":true,"x":12,"y":14,"sort":"f","avariable":false},{"isFreeSpace":false,"x":13,"y":14,"sort":"4","avariable":false},{"isFreeSpace":false,"x":14,"y":14,"sort":"4","avariable":false},{"isFreeSpace":false,"x":15,"y":14,"sort":"4","avariable":false},{"isFreeSpace":true,"x":16,"y":14,"sort":"f","avariable":false}]},{"rowNr":15,"fields":[{"isFreeSpace":true,"x":0,"y":15,"sort":"f","avariable":false},{"isFreeSpace":false,"x":1,"y":15,"sort":"1","avariable":false},{"isFreeSpace":true,"x":2,"y":15,"sort":"f","avariable":false},{"isFreeSpace":false,"x":3,"y":15,"sort":"1","avariable":false},{"isFreeSpace":true,"x":4,"y":15,"sort":"f","avariable":false},{"isFreeSpace":false,"x":5,"y":15,"sort":"2","avariable":false},{"isFreeSpace":true,"x":6,"y":15,"sort":"f","avariable":false},{"isFreeSpace":false,"x":7,"y":15,"sort":"2","avariable":false},{"isFreeSpace":true,"x":8,"y":15,"sort":"f","avariable":false},{"isFreeSpace":false,"x":9,"y":15,"sort":"3","avariable":false},{"isFreeSpace":true,"x":10,"y":15,"sort":"f","avariable":false},{"isFreeSpace":false,"x":11,"y":15,"sort":"3","avariable":false},{"isFreeSpace":true,"x":12,"y":15,"sort":"f","avariable":false},{"isFreeSpace":false,"x":13,"y":15,"sort":"4","avariable":false},{"isFreeSpace":true,"x":14,"y":15,"sort":"f","avariable":false},{"isFreeSpace":false,"x":15,"y":15,"sort":"4","avariable":false},{"isFreeSpace":true,"x":16,"y":15,"sort":"f","avariable":false}]}]};

function undo() {
    $.ajax(
        {
            type: 'GET',
            url: "undo",

            success: function (result) {
                updateGame()
            }
        }
    )
}

function redo() {
    $.ajax(
        {
            type: 'GET',
            url: "redo",

            success: function (result) {
                updateGame()
            }
        }
    )
}

function nextTurn() {
    $.ajax(
        {
            type: 'GET',
            url: "turn",

            success: function (result) {
                updateGame()
            }
        }
    )
}

function newGame() {
    $.ajax(
        {
            type: 'GET',
            url: "new/" + $('#newGamePlayerCount').val(),

            success: function (result) {
                updateGame()
            }
        }
    )
}

function addButtons() {
    $('#newButton').click(function () {
        newGame();
    });

    $('#undoButton').click(function () {
        undo()
    });

    $('#redoButton').click(function () {
        redo()
    });

    $('#nextButton').click(function () {
        nextTurn()
    });
}

function updateGame() {
    $.ajax(
        {
            type: 'GET',
            url: "gameJson",

            success: function (result) {

                $('#state-message').html(result.message);
                $('#player-image').attr('src', '/assets/images/player'+result.activePlayer+'.png');
                $('#dice-image').attr('src', '/assets/images/dice'+result.diced+'.png');

                for(var rowKey in result.rows) {
                    var row = result.rows[rowKey].fields;

                    for(var fieldKey in row) {
                        var fieldJson = row[fieldKey];

                        var field = $('.field').filter('[x=' + fieldJson.x + ']').filter('[y=' + fieldJson.y + ']');

                        field.addClass('gameField');

                        if(!fieldJson.isFreeSpace) {

                            if (fieldJson.avariable) {
                                field.addClass('markedField');
                            } else {
                                field.removeClass('markedField');
                            }

                            if (fieldJson.sort == 'b')  {
                                field.html('<div class="stone blockStone"></div>');
                            } else if(fieldJson.sort == '1') {
                                field.html('<div class="stone p1Stone"></div>');
                            } else if(fieldJson.sort == '2') {
                                field.html('<div class="stone p2Stone"></div>');
                            } else if(fieldJson.sort == '3') {
                                field.html('<div class="stone p3Stone"></div>');
                            } else if(fieldJson.sort == '4') {
                                field.html('<div class="stone p4Stone"></div>');
                            }else {
                                field.html('')
                            }
                        }else{
                            field.removeClass('gameField');
                        }
                    }
                }
            }
        }
    )
}

$(document).keypress(function (event) {
    var keycode = (event.keyCode ? event.keyCode : event.which);
    if (keycode == '110') {
        nextTurn()
    }
    if (keycode == '117') {
        undo()
    }
    if (keycode == '114') {
        redo()
    }
});

$(document).click(function (event) {
    var target = $(event.target)

    if (target.hasClass("stone")) {

        target = target.parent()

        var x = target.attr("x")
        var y = target.attr("y")

        $.ajax(
            {
                type: 'GET',
                url: "touch/" + x + "/" + y,

                success: function () {
                    updateGame()
                }
            }
        )
    }

    if (target.hasClass("gameField")) {

        var x = target.attr("x")
        var y = target.attr("y")

        $.ajax(
            {
                type: 'GET',
                url: "touch/" + x + "/" + y,

                success: function (result) {
                    updateGame()
                }
            }
        )
    }
});



function connectWebSocket() {
    var websocket = new WebSocket("wss://malefiz-web.herokuapp.com/websocket");
    websocket.setTimeout

    websocket.onopen = function(event) {
        console.log("Connected to Websocket");
        socket.send('Hello Server!');
        updateGame()
    }

    websocket.onclose = function () {
        console.log('Connection with Websocket Closed!');
    };

    websocket.onerror = function (error) {
        console.log('Error in Websocket Occured: ' + error);
    };

    websocket.onmessage = function (e) {
        if (typeof e.data === "string") {
            console.log('recieved')
            updateGame()
        }

    };
}
$(document).ready(function () {
    addButtons();
    connectWebSocket()
    updateGame();
});

Vue.component('board', {
    template: `<div class="board">
    <div v-for="row in rows" class="row">
      <field v-for="field in row.fields" v-bind:x="field.x" v-bind:y="field.y"></field>
    </div>
  </div>`,
    data: function(){
        return {
            rows: gameJson.rows
        }
    },
});

Vue.component('field', {
    template: '<div class="field"></div>',

});

new Vue({
    el: '#vueBoard'
});